<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>DataTransferKit by ORNL-CEES</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>DataTransferKit</h1>
        <p>A library for multiphysics solution transfer.</p>
        <p class="view"><a href="https://github.com/ORNL-CEES/DataTransferKit">View the Project on GitHub <small>ORNL-CEES/DataTransferKit</small></a></p>
        <ul>
          <li><a href="https://github.com/ORNL-CEES/DataTransferKit/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/ORNL-CEES/DataTransferKit/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/ORNL-CEES/DataTransferKit">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p>Data Transfer Kit (DTK)</p>

<hr>

<p>The Data Transfer Kit (DTK) is an open-source software library
designed to provide parallel services for solution transfer for
multiphysics simulations. DTK uses a general operator design to
provide scalable parallel services for solution transfer between
shared volumes and surfaces. DTK is supported and used by the
following Department of Energy multiphysics modeling and simulation
programs:</p>

<ul>
<li><p>Consortium for Advanced Simulation of Light Water Reactors (CASL)
<a href="http://www.casl.gov">http://www.casl.gov</a></p></li>
<li><p>National Highway Traffic Safety Administration (NHTSA)
<a href="http://batterysim.org">http://batterysim.org</a></p></li>
<li><p>Nuclear Energy Advanced Modeling and Simulation (NEAMS)
<a href="http://www.ne.anl.gov/NEAMS/">http://www.ne.anl.gov/NEAMS/</a></p></li>
</ul>

<h1>
<a id="datatransferkit-development-team" class="anchor" href="#datatransferkit-development-team" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataTransferKit Development Team</h1>

<p>DTK is developed and maintained by:</p>

<ul>
<li><p>Stuart Slattery <a href="mailto:slatterysr@ornl.gov">slatterysr@ornl.gov</a></p></li>
<li><p>Damien Lebrun-Grandie <a href="mailto:lebrungrandt@ornl.gov">lebrungrandt@ornl.gov</a></p></li>
<li><p>Roger Pawlowski <a href="mailto:rppawlo@sandia.gov">rppawlo@sandia.gov</a></p></li>
</ul>

<h1>
<a id="datatransferkit-packages" class="anchor" href="#datatransferkit-packages" aria-hidden="true"><span class="octicon octicon-link"></span></a>DataTransferKit Packages</h1>

<p>DTK has the following packages:</p>

<p><strong>Utils</strong>
    General utilities for software development including exception
    handling, MPI-based tools, and functional programming tools</p>

<p><strong>Interface</strong>
    Core DTK interface package. Interfaces are divided into two
    categories: <em>Client</em> and <em>Operator</em>. <em>Client</em> interfaces define a
    polymorphic API implemented by client applications providing
    access to mesh, geometry, parallel decomposition, shape functions,
    and parametric mappings. <em>Operator</em> interfaces define the general
    operator for solution transfer and other concepts for
    constructing solution transfer operators from client code.</p>

<p><strong>Operators</strong>
    DTK solution transfer operator implementation package. Operators
    contains implementations of the following algorithms:</p>

<pre><code>* Shape function interpolation
* Moving least square reconstruction
* Spline interpolation
</code></pre>

<p><strong>Adapters</strong>
    Client interface adapters for common mesh databases,
    discretization libraries, and geometric objects. Implementations
    include:</p>

<pre><code>* Sierra Toolkit Mesh (STK Mesh) &lt;http://trilinos.org/packages/stk/&gt;

* Intrepid: Interoperable Tools for Rapid dEveloPment of
  compatIble Discretizations
  &lt;http://trilinos.org/packages/intrepid/&gt;

* MOAB: A Mesh-Oriented datABase
  &lt;http://trac.mcs.anl.gov/projects/ITAPS/wiki/MOAB&gt;

* Basic geometric objects

Outside of the DTK source code, other applications have
implementations of the DTK client interfaces in their code base
that may be used to leverage the DTK services and interoperate
with other libraries that have implemented the interfaces. These
include:

* AMP: Advanced Multi-Physics
  &lt;https://rsicc.ornl.gov/codes/ccc/ccc7/ccc-793.html&gt;
</code></pre>

<h1>
<a id="questions-bug-reporting-and-issue-tracking" class="anchor" href="#questions-bug-reporting-and-issue-tracking" aria-hidden="true"><span class="octicon octicon-link"></span></a>Questions, Bug Reporting, and Issue Tracking</h1>

<p>Questions, bug reporting and issue tracking are provided by
GitHub. Please report all bugs by creating a new issue. You can ask
questions by emailing the developers or by creating a issue with the
question tag.</p>

<h1>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h1>

<p>DataTransferKit is designed to build and run with a minimum number of
dependencies and is structured largely as a Trilinos package.  The
dependenices and third-party libraries (TPLs) necessary to build DTK
are all open-source and freely available. The Dependencies for DTK are
listed in the following table:</p>

<p>+-----------------------+---------------+---------------------------------------+
| Dependency            | Required      | Comments                              |
+=======================+===============+=======================================+
| C++11                 | Yes           | GNU, Intel, and Clang are suggested   |
+-----------------------+---------------+---------------------------------------+
| DTKData               | Yes           | Large binary files for tests/examples |
+-----------------------+---------------+---------------------------------------+
| TriBITS               | Yes           | Build system provided with Trilinos   |
+-----------------------+---------------+---------------------------------------+
| Trilinos              | Yes           | Current git revision required         |
+-----------------------+---------------+---------------------------------------+
| BLAS/LAPACK           | Yes           | Use vendor-specific implementation    |
+-----------------------+---------------+---------------------------------------+
| MPI                   | No            | OpenMPI and MPICH are suggested       |
+-----------------------+---------------+---------------------------------------+
| MOAB                  | No            | Required to build MOAB adapters       |
+-----------------------+---------------+---------------------------------------+</p>

<p>You can get the most recent Trilinos git revision at
<a href="https://software.sandia.gov/trilinos/repositories/publicTrilinos">https://software.sandia.gov/trilinos/repositories/publicTrilinos</a>. It
is anticipated that when Trilinos 12.0 is released in the spring, DTK
will depend on that release instead of the development
head. Currently, features targeted for the 12.0 Trilinos release that
are not present in the current 11.12 release are required by DTK and
therefore the development head is needed at present to build DTK.</p>

<p>To use build some examples and tests you will need the DTKData
repository which can be found at
<a href="https://github.com/ORNL-CEES/DTKData">https://github.com/ORNL-CEES/DTKData</a>. Simply check out the
repository into the top level DataTransferKit directory or provide a
soft link of to the location of the repository.</p>

<h1>
<a id="building-dtk" class="anchor" href="#building-dtk" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building DTK</h1>

<p>The following steps can be followed to build DTK with MPI support as
well as tests and examples. First, checkout DataTransferKit (assumed
to be in a directory named <code>DataTransferKit</code> for these
instructions). Next create a soft link to the cloned copy of the
DTKData repository::</p>

<pre><code>&gt; cd DataTransferKit
&gt; ln -s $PATH_TO_DTKDATA
</code></pre>

<p>After this, we need to create a soft link of DTK into the main
Trilinos directory. We do this because DTK is a TriBITS package and
will build as a part of the Trilinos build, effectively becoming a
linkable package include among the larger group of Trilinos
packages. We create this link as::</p>

<pre><code>&gt; cd $PATH_TO_TRILINOS
&gt; ln -s $PATH_TO_DATATRANSFERKIT
</code></pre>

<p>TriBITS is a CMake-based meta-build system
<a href="https://github.com/TriBITSPub">https://github.com/TriBITSPub</a> used by Trilinos. Although freely
available on GitHub, a version is also included as a snapshot in
Trilinos and we use that version here. To setup the build we will make
two directories; one for building and one for installing::</p>

<pre><code>&gt; mkdir $PATH_TO_BUILD_DIR
&gt; mkdir $PATH_TO_INSTALL_DIR
&gt; cd $PATH_TO_BUILD_DIR
</code></pre>

<p>Next we can run a build shell script that executes CMake with a number
of options to configure both Trilinos and DataTransferKit::</p>

<pre><code>#!/bin/bash

# Clear previous configure
rm -rf CMakeCache.txt
rm -rf CMakeFiles

cmake \
-D CMAKE_INSTALL_PREFIX:PATH=${PATH_TO_INSTALL_DIR} \
-D CMAKE_BUILD_TYPE:STRING=DEBUG \
-D CMAKE_VERBOSE_MAKEFILE:BOOL=OFF \
-D TPL_ENABLE_MPI:BOOL=ON \
-D MPI_BASE_DIR:PATH=$PATH_TO_MPI_INSTALL \
-D TPL_BLAS_LIBRARIES:STRING="${PATH_TO_BLAS_LIB}" \
-D TPL_LAPACK_LIBRARIES:STRING="${PATH_TO_LAPACK_LIB}" \
-D Trilinos_ENABLE_CXX11:BOOL=ON \
-D Trilinos_ENABLE_ALL_OPTIONAL_PACKAGES:BOOL=OFF \
-D Trilinos_ASSERT_MISSING_PACKAGES=OFF \
-D Trilinos_EXTRA_REPOSITORIES="DataTransferKit" \
-D Trilinos_ENABLE_DataTransferKit:BOOL=ON \
-D DataTransferKit_ENABLE_DBC:BOOL=ON \
-D DataTransferKit_ENABLE_TESTS:BOOL=ON \
-D DataTransferKit_ENABLE_EXAMPLES:BOOL=ON \
$PATH_TO_TRILINOS
</code></pre>

<p>Some details on the script: </p>

<ul>
<li><p>Changing the variable <code>CMAKE_BUILD_TYPE</code> from <code>DEBUG</code> to <code>RELEASE</code>
will produce an optimized build instead of debug build.</p></li>
<li><p><code>MPI_BASE_DIR:PATH=$PATH_TO_MPI_INSTALL</code> tells CMake where the MPI
installation you would like to use resides. If you only have one and
it is set in your environment, simply setting
<code>TPL_ENABLE_MPI:BOOL=ON</code> can be enough.</p></li>
<li><p><code>TPL_BLAS_LIBRARIES</code> and <code>TPL_LAPACK_LIBRARIES</code> point to the BLAS and
LAPACK libraries installed on your system.</p></li>
<li><p><code>Trilinos_EXTRA_REPOSITORIES="DataTransferKit"</code> indicates to TriBITS
that we are adding DataTransferKit as an additional Trilinos
package.</p></li>
<li><p><code>Trilinos_ENABLE_DataTransferKit:BOOL=ON</code> instructs TriBITS to build
DataTransferKit</p></li>
<li><p><code>DataTransferKit_ENABLE_DBC</code> toggles the DataTransferKit
Design-by-Contract feature <code>ON</code> or <code>OFF</code>. This feature adds many
layers of checks into the code useful for debugging purposes at that
cost of significant additional runtime. Enabling the feature is
recommended for new users to verify inputs and implementations. This
feature should be disabled for production calculations once an
implementation is tested.</p></li>
<li><p><code>DataTransferKit_ENABLE_TESTS</code> toggles if unit tests are <code>ON</code> or
<code>OFF</code></p></li>
<li><p><code>DataTransferKit_ENABLE_EXAMPLES=ON</code> toggles if examples are <code>ON</code> or
<code>OFF</code></p></li>
</ul>

<p>To build other packages of DTK, the syntax is similar. For example, to
add the Moab client interface implementations to the build add the
following::</p>

<pre><code>-D TPL_ENABLE_MOAB:BOOL=ON \
-D MOAB_LIBRARY_DIRS:PATH=${PATH_TO_MOAB_INSTALL}/lib \
-D MOAB_INCLUDE_DIRS:PATH=${PATH_TO_MOAB_INSTALL}/include \
-D Trilinos_ENABLE_DataTransferKitMoabAdapters:BOOL=ON \
</code></pre>

<p>Configuration, building, testing, installing (assuming
<code>DataTransferKit_ENABLE_TESTS</code> is <code>ON</code>) then proceeds as follows
assuming 8 threads are available for building and testing::</p>

<pre><code>&gt; cd $PATH_TO_BUILD_DIR
&gt; ./run_cmake_configure.sh
&gt; make -j8
&gt; ctest -j8
&gt; make -j8 install
</code></pre>

<p>It is always recommended to build and run unit tests when installing
DTK to ensure that the installation process was correct and that DTK
has no bugs dependent on your system. If your application code using
DTK is not working and unit tests are failing, this can help the
developers track down the problem.</p>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/ORNL-CEES">ORNL-CEES</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-59632630-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>